{"version":3,"file":"index.js","mappings":"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","sources":["webpack:///./src/bond-row-component.ts","webpack:///./src/load-report.ts","webpack:///./src/night-mode.ts","webpack:///./src/report-row-extensions.ts","webpack:///./src/settings.ts","webpack:///./src/storageUtil.ts","webpack:///./src/view-model.ts","webpack:///external var \"{ default: Vue }\"","webpack:///webpack/bootstrap","webpack:///./src/index.ts"],"sourcesContent":["import Vue from \"vue\";\r\nimport IReportRow from \"./report-row\";\r\nimport { hasOffer, isVarCoupon, ratingText } from \"./report-row-extensions\";\r\n\r\nconst PILL_BADGE_CLASS_PREFIX = \"badge badge-pill badge-\";\r\n\r\ninterface IContext {\r\n    row: IReportRow;\r\n}\r\n\r\nVue.component(\"bond-row\", {\r\n    props: [ \"row\" ],\r\n    template: \"#bond-row-template\",\r\n    computed: {\r\n\r\n        moexUrl(this: IContext) {\r\n            return \"https://www.moex.com/ru/issue.aspx?code=\" + this.row.isin;\r\n        },\r\n\r\n        ratingText(this: IContext) {\r\n            return ratingText(this.row);\r\n        },\r\n\r\n        listLevelBadgeClass(this: IContext) {\r\n            const row = this.row;\r\n            switch (row.listLevel) {\r\n                case 1: return PILL_BADGE_CLASS_PREFIX + \"success\";\r\n                case 2: return PILL_BADGE_CLASS_PREFIX + \"warning\";\r\n                case 3: return row.isHighRisk\r\n                    ? PILL_BADGE_CLASS_PREFIX + \"dark bond-finder-ir-badge\"\r\n                    : PILL_BADGE_CLASS_PREFIX + \"danger\";\r\n            }\r\n        },\r\n\r\n        listLevelName(this: IContext) {\r\n            const row = this.row;\r\n            switch (row.listLevel) {\r\n                case 1: return \"I\";\r\n                case 2: return \"II\";\r\n                case 3: return row.isHighRisk\r\n                    ? \"\\xa0\"\r\n                    : \"III\";\r\n            }\r\n        },\r\n\r\n        showCouponStar(this: IContext) {\r\n            return isVarCoupon(this.row)\r\n                || hasOffer(this.row);\r\n        },\r\n\r\n        rowClass(this: IContext) {\r\n            return this.row.infoUrl ? \"bond-finder-separator\" : null;\r\n        }\r\n    }\r\n});\r\n","import IReportRow from \"./report-row\";\r\nimport storageUtil from \"./storageUtil\";\r\n\r\nconst REPORT_URL = \"https://bond-finder-lab.github.io/backend/report-v1.json?_=\" + Date.now();\r\nconst CACHE_KEY = \"report-cache-v1\";\r\n\r\ninterface IReport {\r\n    date: string;\r\n    rows: ReadonlyArray<IReportRow>;\r\n    error?: boolean;\r\n}\r\n\r\nfunction convert(source: any): IReport {\r\n    const cols = source.cols as string[];\r\n    const rows = source.rows as any[];\r\n\r\n    const indexOf: { [jsonKey: string]: number } = {};\r\n    for (const name of cols) {\r\n        indexOf[name] = cols.indexOf(name);\r\n    }\r\n\r\n    return {\r\n        date: String(source.date),\r\n        rows: rows.map((r) => ({\r\n            isin: String(r[indexOf.isin]),\r\n            name: String(r[indexOf.name]),\r\n            sector: Number(r[indexOf.sector]),\r\n            listLevel: Number(r[indexOf.list_level]),\r\n            totalTradesPerc: Number(r[indexOf.total_trades_perc]),\r\n            maturityDate: String(r[indexOf.maturity_date]),\r\n            minDaysBetweenAmort: Number(r[indexOf.min_days_between_amort]),\r\n            couponMonths: r[indexOf.coupon_months] as number[],\r\n            couponValues: r[indexOf.coupon_values] as number[],\r\n            closeYield: Number(r[indexOf.close_yield]),\r\n            inABI: Boolean(r[indexOf.in_abi]),\r\n            inCBHY: Boolean(r[indexOf.in_cbhy]),\r\n            isHighRisk: Boolean(r[indexOf.high_risk]),\r\n            isQualOnly: Boolean(r[indexOf.qual]),\r\n            rub: !(\"rub\" in indexOf) || Boolean(r[indexOf.rub]),\r\n            rating: Number(r[indexOf.rating]),\r\n            waprice: Number(r[indexOf.waprice]),\r\n            fits: false,\r\n            top: false,\r\n            infoUrl: null\r\n        }))\r\n    };\r\n}\r\n\r\nexport default (callback: (report: IReport) => void) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", REPORT_URL, true);\r\n    xhr.timeout = 10 * 1000;\r\n\r\n    function handleResponseText(responseText: string) {\r\n        try {\r\n            callback(convert(JSON.parse(responseText)));\r\n        } catch {\r\n            callback({ error: true, date: null, rows: [ ] });\r\n        }\r\n    }\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if (this.readyState === 4) {\r\n        if (this.status === 200) {\r\n            const { responseText } = this;\r\n            storageUtil.save(CACHE_KEY, responseText);\r\n            handleResponseText(responseText);\r\n        } else {\r\n            handleResponseText(storageUtil.load(CACHE_KEY));\r\n        }\r\n      }\r\n    };\r\n\r\n    xhr.send();\r\n};\r\n","import storageUtil from \"./storageUtil\";\r\n\r\nconst KEY = \"night\";\r\n\r\nlet currentMode: number;\r\nlet wasScrolled = false;\r\n\r\nfunction prefersDark() {\r\n    try {\r\n        return window.matchMedia && matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n    } catch {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction loadMode() {\r\n    const loadResult = storageUtil.load(KEY);\r\n    if (loadResult == null) {\r\n        return -1;\r\n    }\r\n    return Number(loadResult);\r\n}\r\n\r\nfunction getMode() {\r\n    return currentMode;\r\n}\r\n\r\nfunction setMode(mode: number) {\r\n    currentMode = mode;\r\n    storageUtil.save(KEY, mode);\r\n    updateMarkup();\r\n}\r\n\r\nfunction isNight() {\r\n    if (currentMode < 0) {\r\n        return prefersDark();\r\n    }\r\n    return currentMode > 0;\r\n}\r\n\r\nfunction toggleClass(element: HTMLElement, className: string, active: boolean) {\r\n    const classList = element.classList;\r\n    if (active) {\r\n        classList.add(className);\r\n    } else {\r\n        classList.remove(className);\r\n    }\r\n}\r\n\r\nfunction updateMarkup() {\r\n    toggleClass(document.documentElement, \"night\", isNight());\r\n}\r\n\r\nfunction onDocScroll() {\r\n    const scrolled = window.pageYOffset > 0;\r\n    if (wasScrolled !== scrolled) {\r\n        toggleClass(document.documentElement, \"scrolled\", scrolled);\r\n        wasScrolled = scrolled;\r\n    }\r\n}\r\n\r\ncurrentMode = loadMode();\r\n\r\ndocument.addEventListener(\"scroll\", onDocScroll, false);\r\n\r\nexport default { getMode, setMode, updateMarkup };\r\n","import IReportRow from \"./report-row\";\r\n\r\nfunction isOFZPK(row: IReportRow) {\r\n    return isOFZ(row, \"ПК\");\r\n}\r\n\r\nexport function isOFZ(row: IReportRow, type: string) {\r\n    return row.sector === 1 && row.name.substr(0, 7) === `ОФЗ-${type} `;\r\n}\r\n\r\nexport function isVarCoupon(row: IReportRow) {\r\n    return row.couponValues.length > 1 || isOFZPK(row);\r\n}\r\n\r\nexport function hasOffer(row: IReportRow) {\r\n    const v = row.couponValues;\r\n    return v[v.length - 1] === null && !isOFZPK(row);\r\n}\r\n\r\nexport function calcCurrentYield(row: IReportRow) {\r\n    const coupon = row.couponValues[0];\r\n    const waprice = row.waprice;\r\n\r\n    if (coupon && waprice) {\r\n        return 100 * coupon / waprice;\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nexport function ratingText(row: IReportRow): string {\r\n    switch (row.rating) {\r\n        case 6: return \"AAA\";\r\n\r\n        case 5.1: return \"AA+\";\r\n        case 5.0: return \"AA\";\r\n        case 4.9: return \"AA-\";\r\n\r\n        case 4.1: return \"A+\";\r\n        case 4.0: return \"A\";\r\n        case 3.9: return \"A-\";\r\n\r\n        case 3.1: return \"BBB+\";\r\n        case 3.0: return \"BBB\";\r\n        case 2.9: return \"BBB-\";\r\n\r\n        case 2.1: return \"BB+\";\r\n        case 2.0: return \"BB\";\r\n        case 1.9: return \"BB-\";\r\n\r\n        case 1.1: return \"B+\";\r\n        case 1.0: return \"B\";\r\n        case 0.9: return \"B-\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function toTsvLine(row: IReportRow) {\r\n    const cells = [\r\n        row.isin,\r\n        pad(row.name, 12),\r\n        tags(),\r\n        row.listLevel,\r\n        pad(ratingText(row), 4),\r\n        row.maturityDate,\r\n        numeric(row.waprice),\r\n        couponStar(),\r\n        numeric(row.couponValues[0]),\r\n        numeric(row.closeYield)\r\n    ];\r\n\r\n    function tags(): string {\r\n        const list = [ ];\r\n\r\n        if (row.isQualOnly) {\r\n            list.push(\"кв\");\r\n        } else if (row.inABI) {\r\n            list.push(\"*\");\r\n        } else if (row.inCBHY) {\r\n            list.push(\"вд\");\r\n        }\r\n\r\n        if (row.isHighRisk) {\r\n            list.push(\"пир\");\r\n        }\r\n\r\n        return pad(list.join(\", \"), 7);\r\n    }\r\n\r\n    function couponStar(): string {\r\n        if (isVarCoupon(row) || hasOffer(row)) {\r\n            return \"**\";\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    function numeric(value: number): string {\r\n        return pad(String(value || \"\"), 8, true);\r\n    }\r\n\r\n    function pad(text: string, len: number, left = false): string {\r\n        while (text.length < len) {\r\n            if (left) {\r\n                text = \" \" + text;\r\n            } else {\r\n                text = text + \" \";\r\n            }\r\n        }\r\n        return text;\r\n    }\r\n\r\n    return cells.join(\"\\t\");\r\n}\r\n","import storageUtil from \"./storageUtil\";\r\n\r\nconst STORAGE_KEY = \"settings-v1\";\r\n\r\nexport interface ISettings {\r\n    rub: boolean;\r\n    min_month: string;\r\n    min_year: string;\r\n    month: string;\r\n    year: string;\r\n    sector1: boolean;\r\n    sector2: boolean;\r\n    sector3: boolean;\r\n    highRisk: boolean;\r\n    maxListLevel: string;\r\n    minRating: string;\r\n    minRatingMod: string;\r\n    maxPerYear: string;\r\n    requiredCouponMonth: string;\r\n    couponType: string;\r\n    minCurrentYield: string;\r\n    maxAmort: string;\r\n    minTotalTradesPerc: string;\r\n}\r\n\r\nconst TODAY = new Date();\r\nconst TODAY_PLUS_1Y = new Date(TODAY.getFullYear() + 1, TODAY.getMonth(), 1);\r\nconst TODAY_PLUS_4Y = new Date(TODAY.getFullYear() + 4, TODAY.getMonth(), 1);\r\n\r\nfunction getMonthText(date: Date): string {\r\n    const m = 1 + date.getMonth();\r\n    return m > 9 ? String(m) : (\"0\" + m);\r\n}\r\n\r\nconst DEFAULT_SETTINGS: ISettings = {\r\n    rub: true,\r\n    min_month: getMonthText(TODAY_PLUS_1Y),\r\n    month: getMonthText(TODAY_PLUS_4Y),\r\n    min_year: String(TODAY_PLUS_1Y.getFullYear()),\r\n    year: String(TODAY_PLUS_4Y.getFullYear()),\r\n    sector1: true,\r\n    sector2: true,\r\n    sector3: true,\r\n    highRisk: true,\r\n    maxListLevel: \"2\",\r\n    minRating: \"0\",\r\n    minRatingMod: \"0\",\r\n    maxPerYear: \"4\",\r\n    requiredCouponMonth: \"0\",\r\n    couponType: \"0\",\r\n    minCurrentYield: \"\",\r\n    maxAmort: \"90\",\r\n    minTotalTradesPerc: \"50\"\r\n};\r\n\r\nexport function load(): ISettings {\r\n    const result = { ...DEFAULT_SETTINGS };\r\n    const storedSettings = storageUtil.load(STORAGE_KEY, true);\r\n\r\n    if (storedSettings && typeof storedSettings === \"object\") {\r\n        for (const key of Object.keys(DEFAULT_SETTINGS)) {\r\n            if (key in storedSettings) {\r\n                result[key] = storedSettings[key];\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function save(settings: ISettings) {\r\n    storageUtil.save(STORAGE_KEY, settings, true);\r\n}\r\n\r\nexport function minRatingModApplicable(minRating: number) {\r\n    return minRating > 0 && minRating < 6;\r\n}\r\n","function getStorageKey(key: string) {\r\n    return \"bond-finder-\" + key;\r\n}\r\n\r\nfunction load(key: string, json = false) {\r\n    try {\r\n        const value = localStorage.getItem(getStorageKey(key));\r\n        return json ? JSON.parse(value) : value;\r\n    } catch {\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction save(key: string, value: any, json = false) {\r\n    try {\r\n        localStorage.setItem(\r\n            getStorageKey(key),\r\n            (json ? JSON.stringify : String)(value)\r\n        );\r\n    } catch {\r\n        // mute\r\n    }\r\n}\r\n\r\nexport default { load, save };\r\n","import IReportRow from \"./report-row\";\r\nimport { calcCurrentYield, hasOffer, isOFZ, isVarCoupon } from \"./report-row-extensions\";\r\nimport { ISettings, minRatingModApplicable, save as saveSettings } from \"./settings\";\r\n\r\nexport interface IViewModel {\r\n    nightMode: number;\r\n    settings?: ISettings;\r\n    reportDate?: string;\r\n    reportRows?: ReadonlyArray<IReportRow>;\r\n    reportError?: boolean;\r\n    totalFits?: number;\r\n    showAll?: boolean;\r\n    hasABI?: boolean;\r\n    hasCBHY?: boolean;\r\n    hasHighRisk?: boolean;\r\n    hasQualOnly?: boolean;\r\n    collapseForm?: boolean;\r\n    showVarCouponNotice?: boolean;\r\n    showOfferNotice?: boolean;\r\n    showClipboardCheck?: boolean;\r\n    // showAlert?: boolean;\r\n}\r\n\r\nexport function applySettings(VM: IViewModel) {\r\n    saveSettings(VM.settings);\r\n\r\n    const settings = VM.settings;\r\n    const rub = settings.rub;\r\n    const maturityDateMin = [ clampYear(settings.min_year), settings.min_month, \"01\" ].join(\"-\");\r\n    const maturityDateMax = [ clampYear(settings.year), settings.month, \"31\" ].join(\"-\");\r\n    const maxListLevel = Number(settings.maxListLevel);\r\n    const minRating = Number(settings.minRating);\r\n    const minRatingMod = Number(settings.minRatingMod);\r\n    const maxPerYear = Number(settings.maxPerYear);\r\n    const requiredCouponMonth = Number(settings.requiredCouponMonth);\r\n    const maxAmort = Number(settings.maxAmort);\r\n    const minTotalTradesPerc = Number(settings.minTotalTradesPerc);\r\n    const minCurrentYield = Number(settings.minCurrentYield);\r\n\r\n    const couponType = Number(settings.couponType);\r\n    const allowVarCoupon = couponType > 0;\r\n    const allowOffer = couponType > 1;\r\n\r\n    const minRatingCombo = minRatingModApplicable(minRating) ? (minRating + minRatingMod) : minRating;\r\n\r\n    const TOP = 20;\r\n    const MAX = 1000;\r\n\r\n    let totalFits = 0;\r\n    let hasABI = false;\r\n    let hasCBHY = false;\r\n    let hasHighRisk = false;\r\n    let hasQualOnly = false;\r\n    let showVarCouponNotice = false;\r\n    let showOfferNotice = false;\r\n\r\n    let ofzPKUrlAssigned = false;\r\n    let ofzINUrlAssigned = false;\r\n\r\n    for (const row of VM.reportRows) {\r\n        if (fits(row)) {\r\n            totalFits++;\r\n            row.fits = true;\r\n            row.top = totalFits <= TOP;\r\n            showVarCouponNotice = showVarCouponNotice || isVarCoupon(row);\r\n            showOfferNotice = showOfferNotice || hasOffer(row);\r\n            hasABI = hasABI || row.inABI;\r\n            hasCBHY = hasCBHY || row.inCBHY;\r\n            hasHighRisk = hasHighRisk || row.isHighRisk;\r\n            hasQualOnly = hasQualOnly || row.isQualOnly;\r\n\r\n            row.infoUrl = null;\r\n            if (!row.closeYield) {\r\n                if (!ofzPKUrlAssigned && isOFZ(row, \"ПК\")) {\r\n                    ofzPKUrlAssigned = true;\r\n                    row.infoUrl = \"https://bcs-express.ru/novosti-i-analitika/ofz-pk-s-priviazkoi-k-ruonia-kak-zashchitit-sredstva-ot-infliatsii\";\r\n                } else if (!ofzINUrlAssigned && isOFZ(row, \"ИН\")) {\r\n                    ofzINUrlAssigned = true;\r\n                    row.infoUrl = \"https://bcs-express.ru/novosti-i-analitika/ofz-in-ili-kak-garantirovano-zashchitit-sebia-ot-infliatsii\";\r\n                }\r\n            }\r\n        } else {\r\n            row.fits = row.top = false;\r\n        }\r\n        if (totalFits >= MAX) {\r\n            break;\r\n        }\r\n    }\r\n\r\n    VM.totalFits = totalFits;\r\n    VM.showAll = totalFits / TOP < 1.5;\r\n    VM.hasABI = hasABI;\r\n    VM.hasCBHY = hasCBHY;\r\n    VM.hasHighRisk = hasHighRisk;\r\n    VM.hasQualOnly = hasQualOnly;\r\n    VM.showVarCouponNotice = showVarCouponNotice;\r\n    VM.showOfferNotice = showOfferNotice;\r\n    VM.showClipboardCheck = false;\r\n\r\n    function fits(row: IReportRow) {\r\n        if (row.rub !== rub) {\r\n            return false;\r\n        }\r\n\r\n        if (rub) {\r\n            if (row.isHighRisk && !settings.highRisk) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (maturityDateMin.length < 10 || maturityDateMax.length < 10) {\r\n            return false;\r\n        }\r\n\r\n        if (row.maturityDate < maturityDateMin || row.maturityDate > maturityDateMax) {\r\n            return false;\r\n        }\r\n\r\n        if (rub) {\r\n            if (settings.sector1 || settings.sector2 || settings.sector3) {\r\n                if (row.sector === 1 && !settings.sector1) { return false; }\r\n                if (row.sector === 2 && !settings.sector2) { return false; }\r\n                if (row.sector === 3 && !settings.sector3) { return false; }\r\n            }\r\n\r\n            if (row.listLevel > maxListLevel) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (row.rating < minRatingCombo) {\r\n            return false;\r\n        }\r\n\r\n        const isMonthlyCoupon = row.couponMonths[0] === -12;\r\n\r\n        if (maxPerYear > -1) {\r\n            if (isMonthlyCoupon) {\r\n                return false;\r\n            }\r\n            if (row.couponMonths.length > maxPerYear) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (maxPerYear === -12 && !isMonthlyCoupon) {\r\n            return false;\r\n        }\r\n\r\n        if (requiredCouponMonth > 0 && !isMonthlyCoupon) {\r\n            if (row.couponMonths.indexOf(requiredCouponMonth) < 0) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (!allowVarCoupon && isVarCoupon(row)) {\r\n            return false;\r\n        }\r\n\r\n        if (!allowOffer && hasOffer(row)) {\r\n            return false;\r\n        }\r\n\r\n        if (minCurrentYield > 0 && calcCurrentYield(row) < minCurrentYield) {\r\n            return false;\r\n        }\r\n\r\n        if (row.minDaysBetweenAmort > 0) {\r\n            if (maxAmort === -1) {\r\n                return false;\r\n            }\r\n            if (row.minDaysBetweenAmort < maxAmort) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (row.totalTradesPerc < minTotalTradesPerc) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction clampYear(year: string): string {\r\n    year = String(year);\r\n    if (year.length < 4) {\r\n        return \"2000\";\r\n    }\r\n    if (year.length > 4) {\r\n        return \"3000\";\r\n    }\r\n    return year;\r\n}\r\n","module.exports = { default: Vue };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import Vue from \"vue\";\r\nimport \"./bond-row-component\";\r\nimport loadReport from \"./load-report\";\r\nimport nightMode from \"./night-mode\";\r\nimport { toTsvLine } from \"./report-row-extensions\";\r\nimport { load as loadSettings, minRatingModApplicable } from \"./settings\";\r\nimport storageUtil from \"./storageUtil\";\r\nimport { applySettings, IViewModel } from \"./view-model\";\r\n\r\nconst LAUNCH_TIME = Date.now();\r\nconst ROOT_ID = \"vue-root\";\r\nconst cordova = (window as any).cordova;\r\nconst ALERT_DISMISS_KEY = \"alert-v1\";\r\n\r\nconst VM: IViewModel = {\r\n    nightMode: nightMode.getMode(),\r\n    collapseForm: window.matchMedia && window.matchMedia(\"(max-width: 992px)\").matches\r\n};\r\n\r\nnightMode.updateMarkup();\r\n\r\nif (cordova) {\r\n    document.addEventListener(\"deviceready\", onCordovaReady, false);\r\n    document.addEventListener(\"deviceconfigchange\", onCordovaConfigChange, false);\r\n    document.documentElement.style.userSelect = \"none\";\r\n    trackExternalLinks();\r\n}\r\n\r\nloadReport((report) => {\r\n    VM.settings = loadSettings();\r\n    VM.reportDate = report.date;\r\n    VM.reportRows = report.rows;\r\n\r\n    const reportError = report.error;\r\n    VM.reportError = reportError;\r\n    // VM.showAlert = !reportError && !storageUtil.load(ALERT_DISMISS_KEY);\r\n\r\n    applySettings(VM);\r\n\r\n    // tslint:disable-next-line:no-unused-expression\r\n    new Vue({\r\n        el: \"#\" + ROOT_ID,\r\n        data: VM,\r\n        watch: {\r\n            nightMode: {\r\n                handler: (value) => nightMode.setMode(value)\r\n            },\r\n            settings: {\r\n                deep: true,\r\n                handler: () => applySettings(VM)\r\n            }\r\n        },\r\n        methods: {\r\n            alertClose: () => storageUtil.save(ALERT_DISMISS_KEY, true),\r\n            clipboardButtonClick,\r\n            numberInputKeyPress\r\n        },\r\n        computed: {\r\n            minRatingModVisible() {\r\n                return minRatingModApplicable(Number(this.settings.minRating));\r\n            }\r\n        }\r\n    });\r\n\r\n    document.getElementById(ROOT_ID).style.display = \"\";\r\n    document.getElementById(\"bond-finder-loading\").style.display = \"none\";\r\n\r\n    if (!cordova) {\r\n        initFontSize();\r\n    }\r\n});\r\n\r\nfunction onCordovaReady() {\r\n    document.addEventListener(\"resume\", onCordovaResume, false);\r\n}\r\n\r\nfunction onCordovaResume() {\r\n    if (Date.now() - LAUNCH_TIME > 1234 * 1000) {\r\n        location.reload();\r\n    }\r\n}\r\n\r\nfunction onCordovaConfigChange() {\r\n    nightMode.updateMarkup();\r\n}\r\n\r\nfunction initFontSize() {\r\n    const html = document.documentElement;\r\n    html.style.fontSize = \"medium\";\r\n    html.style.fontSize = 1600 / parseFloat(getComputedStyle(html).fontSize) + \"%\";\r\n}\r\n\r\nfunction trackExternalLinks() {\r\n    document.addEventListener(\"click\", (e) => {\r\n        const a = e.target as HTMLAnchorElement;\r\n        if (a.tagName === \"A\" && !confirmExternalLink(a.href)) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    }, false);\r\n}\r\n\r\nfunction confirmExternalLink(href: string) {\r\n    if (!href) {\r\n        return true;\r\n    }\r\n\r\n    const kind = href.indexOf(\"moex.com/\") > -1 ? \"moex\" : \"other\";\r\n    const storageKey = \"confirm-external-link-\" + kind;\r\n\r\n    if (!storageUtil.load(storageKey)) {\r\n        const subj = kind === \"moex\"\r\n            ? \"сайт Московской Биржи\"\r\n            : \"внешний сайт\";\r\n        if (!confirm(\"Пожалуйста, подтвердите переход на \" + subj)) {\r\n            return false;\r\n        }\r\n        storageUtil.save(storageKey, \"1\");\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nconst NUMBER_ALLOWED_CHARS = {\r\n    \".\": true,\r\n    \"-\": true\r\n};\r\n\r\nfor (let i = 0; i < 10; i++) {\r\n    NUMBER_ALLOWED_CHARS[i] = true;\r\n}\r\n\r\nfunction numberInputKeyPress(e: KeyboardEvent) {\r\n    const key = e.key || String.fromCharCode(e.keyCode);\r\n    if (!NUMBER_ALLOWED_CHARS[key]) {\r\n        e.preventDefault();\r\n    }\r\n}\r\n\r\nfunction clipboardButtonClick() {\r\n    const tsvBuilder = [ ];\r\n    for (const r of VM.reportRows) {\r\n        if (r.fits) {\r\n            tsvBuilder.push(toTsvLine(r));\r\n        }\r\n    }\r\n\r\n    const tsv = tsvBuilder.join(\"\\n\");\r\n\r\n    function onSuccess() {\r\n        if (!cordova) {\r\n            VM.showClipboardCheck = true;\r\n        }\r\n    }\r\n\r\n    function onFailure() {\r\n        alert(\"Не получилось\");\r\n    }\r\n\r\n    if (cordova) {\r\n        cordova.exec(onSuccess, onFailure, \"CordovaPluginUtils\", \"clipboardWrite\", [ tsv ]);\r\n    } else {\r\n        try {\r\n            navigator.clipboard.writeText(tsv).then(onSuccess, onFailure);\r\n        } catch {\r\n            onFailure();\r\n        }\r\n    }\r\n}\r\n"],"names":["PILL_BADGE_CLASS_PREFIX","component","props","template","computed","moexUrl","this","row","isin","ratingText","listLevelBadgeClass","listLevel","isHighRisk","listLevelName","showCouponStar","isVarCoupon","hasOffer","rowClass","infoUrl","REPORT_URL","Date","now","CACHE_KEY","callback","xhr","XMLHttpRequest","handleResponseText","responseText","source","cols","rows","indexOf","date","String","map","r","name","sector","Number","list_level","totalTradesPerc","total_trades_perc","maturityDate","maturity_date","minDaysBetweenAmort","min_days_between_amort","couponMonths","coupon_months","couponValues","coupon_values","closeYield","close_yield","inABI","Boolean","in_abi","inCBHY","in_cbhy","high_risk","isQualOnly","qual","rub","rating","waprice","fits","top","convert","JSON","parse","error","open","timeout","onreadystatechange","readyState","status","save","load","send","currentMode","loadResult","KEY","wasScrolled","isNight","window","matchMedia","matches","prefersDark","toggleClass","element","className","active","classList","add","remove","updateMarkup","document","documentElement","addEventListener","scrolled","pageYOffset","getMode","setMode","mode","isOFZPK","isOFZ","type","substr","length","v","coupon","numeric","value","pad","text","len","left","list","push","join","tags","couponStar","STORAGE_KEY","TODAY","TODAY_PLUS_1Y","getFullYear","getMonth","TODAY_PLUS_4Y","getMonthText","m","DEFAULT_SETTINGS","min_month","month","min_year","year","sector1","sector2","sector3","highRisk","maxListLevel","minRating","minRatingMod","maxPerYear","requiredCouponMonth","couponType","minCurrentYield","maxAmort","minTotalTradesPerc","result","storedSettings","Object","keys","key","settings","getStorageKey","json","localStorage","getItem","setItem","stringify","clampYear","VM","maturityDateMin","maturityDateMax","allowVarCoupon","allowOffer","minRatingCombo","minRatingModApplicable","totalFits","hasABI","hasCBHY","hasHighRisk","hasQualOnly","showVarCouponNotice","showOfferNotice","ofzPKUrlAssigned","ofzINUrlAssigned","reportRows","isMonthlyCoupon","calcCurrentYield","showAll","showClipboardCheck","module","exports","default","Vue","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","LAUNCH_TIME","ROOT_ID","cordova","nightMode","collapseForm","onCordovaResume","location","reload","style","userSelect","e","a","target","tagName","href","kind","storageKey","confirm","confirmExternalLink","preventDefault","stopPropagation","report","reportDate","html","reportError","applySettings","el","data","watch","handler","deep","methods","alertClose","clipboardButtonClick","numberInputKeyPress","minRatingModVisible","getElementById","display","fontSize","parseFloat","getComputedStyle","NUMBER_ALLOWED_CHARS","i","fromCharCode","keyCode","tsvBuilder","toTsvLine","tsv","onSuccess","onFailure","alert","exec","navigator","clipboard","writeText","then"],"sourceRoot":""}